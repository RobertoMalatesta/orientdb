Workbench User Guide
====================
Luca Garulli <l.garulli@gmail.com>
:Author Initials: LG
:toc:
:icons:
:numbered:
:website: http://www.orientechnologies.com/
:gettingstarted: gettingstarded.html



Introduction
------------
Based on the Community Edition, OrientDB provides additional Enterprise Class features like:

- Workbench, as a centralized cockpit to manage multiple servers;
- SQL Profiler, to tune the database based on usage patterns;
- Metric Analyzer, to monitor and analyze metrics;
- Configurable Alerts, to get notified when a node is unreacheable or when a metric breaks a configurable threashold;
- Query Profiler;
- Notification about hot-fixes and new releases;
- Production support available on demand;


.Login of Workbench
image::login.png[width="80%"]

Getting Started
---------------

NOTE: For configuring server please follow this link:gettingstarted.html[guide]


Server Management
-----------------

In Server Management panel there are 4 tabs:

- [BOLD]*Overview*
- [BOLD]*Database Management*
- [BOLD]*Log*
- [BOLD]*Configuration*

Every information is referred to the server that you select at the top of the panel.

At the top there are some information about the selected server:

- Status
- JVM
- OS architecture
- OS name
- Number of CPU
- Java vendor

Overview
~~~~~~~~


The first tab of the server panel, shows a chart that represents CRUD operations for all databases of the selected server, divided by date and time and the number of executions for each operation.

.Crud operations of all databases
image::overview_full.png[width="80%"]

At the right top corner of the tab you can configure chart choosing the resolution (1m, 5m, 30m, 1h), the date range and the chart type.

.Chart configurations
image::chart_configuration.png[height="20%"]


NOTE: You can even choose to see the graphics in real time (realtime option) selecting pull interval.

Database Management
~~~~~~~~~~~~~~~~~~~

.Database Management
image::databasemanagement.png[width="80%"]


Database management panel  shows the list of databases for each server and the chart of crud operations for the selected database.

TIP: select the database by clicking on the name.

Database Backup
^^^^^^^^^^^^^^^


NOTE: You can make a backup of each database, just click on the button on the right of the database name.

.Backup
image::backup.png[height="20%"]

Log
~~~

In log panel you can see all the logs for a particular server by combining the search according to the date and time, the log type, limiting the search to a single log file or to all files.

.Server Log
image::server_log.png[width="80%"]

NOTE: You can even search for a particular text just filling info input.

CAUTION: Choose at least one file for your search.

Configuration
~~~~~~~~~~~~~

In the last tab you can modify orientdb-server-config.xml. Click save to send the configuration back to the server.

.Configurations
image::configuration.png[width="80%"]


CAUTION: Auto-reload isn't supported until 2.0.


Metrics
-------
Metrics panel helps you to configure the metrics of interest by choosing from a list of these.

A list of saved configuration are displayed on the left.

.Metrics builder
image::metricsbuilder.png[width="80%"]


If you want to build a new configuration:

- click on "new" button
- write a name
- select a server
- click on plus button to add a metric
- choose a metric and a value



NOTE: if you want you can combine more metrics in one configuration

.Metrics builder
image::combinemetrics.png[height="60%"]


Query Profiler
--------------


Query profiler panel shows the commands executed for a database on a particular server.

It also shows the type of command, the minimum and maximum number of times executed and the media.

Click "clear" to delete them.

.List of commands executed
image::query_profiler.png[width="80%"]




Notifications
-------------

Notifications panel is similar to Log panel.

In this case you can search all notifications in Workbench databases just combining the search according to the date and time and the log type.


.Notifications panel
image::notifications.png[width="80%"]


NOTE: To free up disk space, you can delete all the logs from the database by clicking the button "Purge notifications now".

Alerts
------

In this section you can configure alerts based on certain events that may occur over time, such as a server goes down or when some metrics exceed some critical values.

Particularly when a metric or a log meets a certain condition can trigger the sending of an email, the execution of an HTTP request or the execution of a function


[BOLD]*When:*

- Log
- Metric

[BOLD]*Do:*

- Send Mail
- Execute HTTP
- Execute Function



.Alerts
image::events.png[width="80%"]

Let's take an example to better understand how events work:

If I would like to receive an email when an error happens on my server I can:

- click on "new event button";
- select "Log" on column "when";
- click "configure" button (on column "when") and  enter the necessary data as shown in figure "Log alert";

.Log alert
image::logwhen.png[width="30%"]

- now select "Mail" on "Do" column and click "configure" and  enter the necessary data as shown in figure  "Mail alert";

.Mail alert
image::mailalert.png[width="30%"]

- click on save button


TIP: There are some keywords that you can use for a better notification. Workbench will replace it with the right data.

.keyword
image::keyword.png[width="30%"]

NOTE: from address, to address, subject and body are mandatory in mail alert.

NOTE: for smtp configure please see Setting chapter.



Settings
--------

In this panel you can configure some settings for the entire Workbench. There are four tabs:

- [BOLD]*Dashboard Configuration*
- [BOLD]*Metrics Configuration*
- [BOLD]*Mail Settings*
- [BOLD]*Global Settings*



Dashboard Configuration
~~~~~~~~~~~~~~~~~~~~~~~

At the left of the panel you have a list of all metrics chart that you have configured in the Metrics panel.

Here you can choose a set of it and the layout to componing the Workbench home page (list or a grid).

.List Configuration
image::dashboard_settings.png[width="70%"]


.Grid Configuration
image::dashboard_setting_2.png[width="70%"]

NOTE: remember to click on the Save button to make the changes permanent


Metrics Configuration
~~~~~~~~~~~~~~~~~~~~~

In metrics configuration you choose wich metrics the Workbench will save in datatabase; check it to enable/disable a metric.

.Metrics configuration
image::metrics_settings.png[width="80%"]


Mail Settings
~~~~~~~~~~~~~

In mail settings panel you can configure your server smtp that will be used in events task.

.Mail Settings
image::mailsettings.png[width="50%"]

NOTE: for proxy settings see Global Settings.


Global Settings
~~~~~~~~~~~~~~~
In this panel you can:

- free up disk space, a schedule will purge metrics and logs older than x hour;

- purge all metric and notifications in Workbench database. Click on the button "purge all metrics now" and "purge all notifications now";

- Set a proxy to permit http request in events panel.

- Keep update about news of orientDB.



.Global Setting
image::globalsettings.png[width="70%"]


Messages
--------

Messages panel shows all notification from Orient Technlogies.

There are three types of messages:

- Commercial [BOLD]*news* about orientDB.
- [BOLD]*Chart* configuration.
- Workbench or Agent [BOLD]*updates*, hot fixes.


.Messages
image::messages.png[width="70%"]


NOTE: Just click on the message to open it.

To install an upgrade version just click on the "install" button.

A pop-up will confirm the installation and instructions to make it effective as shown in the figure below.

.Notification of agent installation
image::notification.png[width="70%"]

NOTE: You can mark all messages as read or you can delete them.


