<div class="container-fluid" ng-controller="ClusterMainController">
    <div class="row-fluid title">
        <h3>
            <i class=" icon-sitemap"></i>
            {{ 'cluster.title' | i18n }}
            <a href="#/help/clustermgmt" style="text-decoration: none"><i class="icon-question-sign pull-right"></i></a>
        </h3>
        <hr>
    </div>


    <div class="row-fluid well" style="width: 96%">
        <div class="span3">
            <form class="form-inline">
                <label for="cluster">{{ 'cluster.cluster' | i18n }}:</label>
                <select id="cluster" ng-model="cluster" class="span6 nomargin" ng-options="s.name for s in nodeClusters"
                        data-placeholder="Pick a Cluster"></select>
                <button class="btn btn-small" ng-click="editCluster()"><i class="icon-edit"></i></button>
                <button class="btn btn-small" ng-click="removeCluster()"><i class="icon-remove"></i></button>
            </form>
        </div>
        <div class="span9">
            <div class="span12">
                <div>
                    <i class="icon-angle-right"></i> {{ 'cluster.port' | i18n }}: <b>{{cluster.port}}</b>
                </div>
                <div>
                    <i class="icon-angle-right"></i> {{ 'cluster.multicast' | i18n }} : <b>{{cluster.multicast |
                    tconfig}}</b>
                </div>
                <div>
                    <i class="icon-angle-right"></i> {{ 'cluster.tcp' | i18n }} : <b>{{cluster.tcp | tconfig}}</b>
                </div>
            </div>

        </div>
    </div>

    <div class="row-fluid graph-server" servergraph ng-show="!db" ng-model="nodes"></div>
    <div class="row-fluid" ng-show="db">
        <div class="span4 graph-db" dbgraph ng-model="dbConfig"></div>
        <div class="span8">
            <div class="row-fluid">
                <form class="form-inline well">
                    <fieldset>
                        <legend>{{'cluster.db.config' | i18n }} {{dbConfig.name}}</legend>

                        <label>{{'cluster.writeQuorum' | i18n}}</label>
                        <input type="text" class="input-medium" ng-model="dbConfig.config.writeQuorum">
                        <label>{{'cluster.readQuorum' | i18n}}</label>
                        <input type="text" class="input-medium" ng-model="dbConfig.config.readQuorum">
                        <br><br>
                        <label class="checkbox">
                            <input type="checkbox" ng-model="dbConfig.config.autoDeploy"> {{'cluster.autoDeploy' |
                            i18n}}
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" ng-model="dbConfig.config.hotAlignment"> {{'cluster.hotAlignment' |
                            i18n}}
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" ng-model="dbConfig.config.readYourWrites">
                            {{'cluster.readYourWrites' | i18n}}
                        </label>
                        <label class="checkbox">
                            <input type="checkbox" ng-model="dbConfig.config.failureAvailableNodesLessQuorum">
                            {{'cluster.failureAvailableNodesLessQuorum' | i18n}}
                        </label>

                    </fieldset>
                </form>
            </div>
            <div class="btn-toolbar pull-right">

                <button class="btn btn-small" ng-click="addCluster()"><i class="icon-plus-sign"> {{ 'cluster.add' | i18n
                    }}</i></button>
                <button class="btn btn-small" ng-click="saveConfig()"><i class="icon-save"> {{ 'cluster.apply' | i18n
                    }}</i></button>
            </div>
            <table class=" table table-striped  table-hover table-condensed ">
                <thead>
                <tr>
                    <th>#</th>
                    <th ng-repeat="s in servers">{{s.name}}</th>

                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="cluster in clusters">
                    <td><select ng-change="setDirtyCluster(cluster,physicalSelect)" ng-model="physicalSelect">
                        <option value=""></option>
                        <option ng-repeat="c in phisicalCluster" ng-selected="isSelectedCluster(cluster,c)"
                                value="{{c.name}}">{{c.name}}
                        </option>
                    </select></td>
                    <td ng-repeat="s in servers"><input
                            ng-change="changeServerConfig(cluster.name,s.name,serverChecked)" ng-model="serverChecked"
                            ng-checked="matrix[cluster.name][s.name]"
                            type="checkbox">
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

</div>