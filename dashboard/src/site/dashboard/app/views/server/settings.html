<div class="container-fluid" ng-controller="SettingsController">
<div class="row-fluid title">
    <h3>
        <i class=" icon-gear"></i>
        {{ 'dashboard.settings' | i18n }}
        <a href="#/help/settings" style="text-decoration: none"><i class="icon-question-sign pull-right"></i></a>
        <button class="btn btn-primary icon-save pull-right" ng-click="saveSettings()"> Save</button>
    </h3>
    <hr>
    <div ng-class="testMsgClass" ng-show="testMsg">
        <button type="button" class="close" onclick="$('.alert-setting').hide()">&times;</button>
        {{ testMsg }}
    </div>

</div>
<div class="row-fluid">
    <ul class="nav nav-tabs">
        <li ng-class="{ active : 'dashboard' == currentTab }"><a href="javascript:void(0)"
                                                                 ng-click="currentTab = 'dashboard'"
                                                                 data-toggle="tab">{{ 'dashboard' |
            i18n }}</a></li>
        <li ng-class="{ active : 'metrics' == currentTab }"><a href="javascript:void(0)"
                                                               ng-click="currentTab = 'metrics'"
                                                               data-toggle="tab">{{
            'dashboard.metrics' | i18n }}</a></li>

        <li ng-class="{ active : 'mailsettings' == currentTab }"><a href="javascript:void(0)"
                                                                    ng-click="currentTab = 'mailsettings'"
                                                                    data-toggle="tab">{{
            'dashboard.mailsettings' | i18n }}</a></li>

        <li ng-class="{ active : 'globalsettings' == currentTab }"><a href="javascript:void(0)"
                                                                      ng-click="currentTab = 'globalsettings'"
                                                                      data-toggle="tab">{{
            'dashboard.globalsettings' | i18n }}</a></li>
        <li ng-class="{ active : 'distributed' == currentTab }"><a href="javascript:void(0)"
                                                                   ng-click="currentTab = 'distributed'"
                                                                   data-toggle="tab">{{
            'dashboard.distributedsettings' | i18n }}</a></li>


    </ul>
</div>

<div class="row-fluid" ng-show="currentTab == 'metrics'">

    <div class="input-append querySearch">
        <input type="text" class="input-xxlarge" placeholder="Search" ng-model="filterOptions.filterText">
        <span class="add-on"><i class="icon-search"></i></span>
    </div>
    <div class="gridStyle" ng-grid="gridOptions"></div>

</div>

<div class="row-fluid" ng-show="currentTab == 'dashboard'">
    <div class="span4">

        <div class="widget boxed black">
            <div class="widget-title">
                <div class="widget-caption">
                    <i class="icon-reorder"></i>
                    {{ 'dashboard.config.available' | i18n }}
                </div>

            </div>
            <div class="widget-body">

                <table class="table table-striped  table-hover table-condensed table-nocolor">
                    <thead>
                    <tr>
                        <th>{{ 'dashboard.metric.name' | i18n }}</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="metr in savedMetrics">
                        <td>{{metr.name}}</td>
                        <td>
                            <a href="javascript:void(0)" class="btn-small" ng-click="selectConfig(metr)"><i
                                    class="icon-plus-sign"></i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>

            <div class="text-right">
                <a href="#/dashboard/metrics">View All Metrics <i class="icon-share"></i></a>
            </div>
        </div>

    </div>
    <div class="span8">

        <div class="widget boxed black">
            <div class="widget-title">
                <div class="widget-caption">
                    <i class="icon-reorder"></i>
                    {{ 'dashboard.preview' | i18n }}
                </div>
                <div class="actions">
                    <button class="btn" ng-click="config.grid = 1"><i class="icon-th-list"></i></button>
                    <button class="btn" ng-click="config.grid = 2"><i class="icon-th-large"></i></button>
                    <button class="btn" ng-click="config.grid = 3"><i class="icon-th"></i></button>
                </div>
            </div>
            <div class="widget-body">

                <div class="row-fluid">
                    <div class="box" ng-class="getGridClass($index,config.grid)" ng-repeat="metr in config.metrics">
                        <div class="span12">
                            <div class="span10">
                                <h4>{{ metr.name }}</h4>
                            </div>
                            <div class="span2">
                                <a href="javascript:void(0)" ng-click="deleteConfig(metr);"><i
                                        class="icon-remove pull-right"></i></a>
                            </div>
                        </div>
                        <div class="span12">
                            <ul class="nav nav-pills nav-stacked">
                                <li ng-repeat="c in metr.config">{{ c.name }} ( {{ c.field }} )</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row-fluid" ng-show="currentTab == 'mailsettings'">
    <div class="well span12">
        <form accept-charset="utf-8" class="form-horizontal ng-pristine" style="margin-left: 20%;">
            <div class="control-group">
                <label class="control-label">
                    User:
                </label>

                <div class="controls">
                    <input type="text" id="user" placeholder="user" ng-model="mailproperties['user']"
                           class="ng-pristine">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Password:
                </label>

                <div class="controls">
                    <input type="password" id="password" placeholder="password" ng-model="mailproperties['password']"
                           class="ng-pristine">
                </div>
            </div>

            <div class="control-group">
                <label class="control-label">
                    Host:
                </label>

                <div class="controls">
                    <input type="text" id="host" placeholder="host" ng-model="mailproperties['host']"
                           class="ng-pristine">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Port:
                </label>

                <div class="controls">
                    <input type="text" id="port" placeholder="port" ng-model="mailproperties['port']"
                           class="ng-pristine">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Enable:
                </label>

                <div class="controls">
                    <input type="checkbox" id="enable" ng-model="mailproperties['enable']" class="ng-pristine">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Start Tls Enable:
                </label>

                <div class="controls">
                    <input type="checkbox" id="starttlsEnable" placeholder="starttlsEnable"
                           ng-model="mailproperties['starttlsEnable']" class="ng-pristine">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Auth:
                </label>

                <div class="controls">
                    <input type="checkbox" id="auth" ng-model="mailproperties['auth']" class="ng-pristine">
                </div>
            </div>
            <div class="control-group">
                <label class="control-label">
                    Date Format:
                </label>

                <div class="controls">
                    <input type="text" id="dateFormat" placeholder="yyyy-MM-dd HH:mm:ss"
                           ng-model="mailproperties['dateFormat']" class="ng-pristine">
                </div>
            </div>
            <div class="control-group">
                * For proxy settings please see "Global Settings".

            </div>

        </form>
    </div>
    <!--<table class="table table-striped table-bordered table-hover table-condensed pointer">-->

    <!--<thead>-->
    <!--<tr>-->
    <!--<th>-->
    <!--User:-->
    <!--</th>-->
    <!--<th>-->
    <!--Password:-->
    <!--</th>-->
    <!--<th>-->
    <!--Host:-->
    <!--</th>-->
    <!--<th>-->
    <!--Port:-->
    <!--</th>-->
    <!--<th>-->
    <!--Enable:-->
    <!--</th>-->
    <!--<th>-->
    <!--Start tls enable:-->
    <!--</th>-->
    <!--<th>-->
    <!--Auth:-->
    <!--</th>-->
    <!--<th>-->
    <!--Date Format:-->
    <!--</th>-->

    <!--</tr>-->
    <!--</thead>-->

    <!--<tbody>-->
    <!--<tr >-->
    <!--<td>-->
    <!--{{mailproperties['user']}}-->

    <!--</td>-->

    <!--<td>-->

    <!--{{mailproperties['password']}}-->
    <!--</td>-->
    <!--<td>-->
    <!--{{mailproperties['host']}}-->

    <!--</td>-->

    <!--<td>-->

    <!--{{mailproperties['port']}}-->
    <!--</td>-->

    <!--<td>-->

    <!--{{mailproperties['enabled']}}-->
    <!--</td>-->

    <!--<td>-->

    <!--{{mailproperties['starttlsEnable']}}-->
    <!--</td>-->
    <!--<td>-->

    <!--{{mailproperties['auth']}}-->
    <!--</td>-->
    <!--<td>-->

    <!--{{mailproperties['dateFormat']}}-->
    <!--</td>-->
    <!--</tr>-->

    <!--</tbody>-->

    <!--</table>-->


</div>
<div class="row-fluid" ng-show="currentTab == 'globalsettings'">


    <div class="span12">

        <ul>
            <li>
                <div>
                    <b>Metrics </b>older then <input type="text" numbersonly="numbersonly" class="span1"
                                                     ng-model="deleteMetricConfiguration['hours']"> hours will be
                    purged
                    automatically
                    from server (0 to disable).

                </div>

                <div class="action" style="float: right">
                    <button class="btn btn-danger" ng-click="purgeMetrics()"><i
                            class="icon-trash"></i> Purge All Metrics Now
                    </button>
                </div>

            </li>
            <br>
            <hr>
            <li>
                <div>
                    <b> Notifications </b>older then <input type="text" numbersonly="numbersonly" class="span1"
                                                            ng-model="notificationsConfiguration['hours']"> hours will
                    be purged
                    automatically
                    from server (0 to disable).

                </div>

                <div class="action" style="float: right">
                    <button class="btn btn-danger" ng-click="purgeLogs()"><i
                            class="icon-trash"></i> Purge All Notifications Now
                    </button>
                </div>
            </li>
            <br>
            <hr>
            <li>
                <b>Proxy</b> IP: <input type="text" ng-model="proxyConfiguration['proxyIp']" placeholder="xx.xx.xx.xx">
                <b>Proxy</b> Port: <input type="text" ng-model="proxyConfiguration['proxyPort']" placeholder="1234">
            </li>
            <br>
            <hr>
            <li>
                <!--<div>-->
                <!--<b> Check for updates </b>every <input type="text" numbersonly="numbersonly" class="span1"-->
                <!--ng-model="updateConfiguration['hours']"> hours.-->
                <!--(0 to disable).-->

                <!--</div>-->
                <div class="controls">
                    <label class="checkbox">
                        Keep me updated about <b>News</b>
                        <input class="ng-pristine ng-valid" type="checkbox"
                               ng-model="updateConfiguration['receiveNews']">
                    </label>
                </div>
            </li>
            <hr>
        </ul>

    </div>


</div>

<div class="row-fluid" ng-show="currentTab == 'distributed'">
    <ng-include src="'views/server/distributed/distributed.html'"></ng-include>
</div>

</div>
