<!--[if lt IE 7]>
<p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser
    today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better
    experience this site.</p>
<![endif]-->


<div class="container-fluid" ng-controller="DashboardController">
    <div class="row-fluid title">
        <h3 data-i18n="">
            <i class=" icon-dashboard"></i>
            {{ 'dashboard.title' | i18n }}
        </h3>
        <hr>
    </div>
    <div class="row-fluid">
        <div class="span6">
            <div class="widget boxed black">
                <div class="widget-title">
                    <div class="widget-caption">
                        <i class=" icon-sitemap"></i>
                        {{ 'servers' | i18n }}
                    </div>
                    <div class="actions">


                        <a class="btn btn-inverse pull-right" href="javascript:void(0)" ng-click="addServer()">
                            <i class="icon-plus-sign"></i>
                            {{ 'servers.new' | i18n }}
                        </a>
                    </div>
                </div>
                <div class="widget-body">
                    <table class="table table-striped  table-hover table-condensed table-nocolor">
                        <thead>
                        <tr>
                            <th>{{ 'server.health.status' | i18n }}</th>
                            <th>{{ 'server.health.name' | i18n }}</th>
                            <th>{{ 'server.health.lastcheck' | i18n }}</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="server in servers">
                            <td><span ng-class="getStatusLabel(server.status)">{{ server.status }}</span></td>
                            <td><a href="#/dashboard/general/{{ server['@rid'] | nopound }}">{{ server.name }}</a></td>
                            <td>{{ server.last_success | fromNow }}</td>
                            <td>
                                <a href="javascript:void(0)" class="btn btn-small"
                                   ng-click="editServer(server['@rid'])"><i
                                        class="icon-edit"></i></a>
                                <a href="javascript:void(0)" class="btn btn-small" ng-click="enable(server['@rid'])"><i
                                        class="icon-time"></i></a>
                                <a href="javascript:void(0)" class="btn btn-small" ng-click="deleteServer(server)"><i
                                        class="icon-trash"></i></a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>
        <div class="span6">

            <div class="widget boxed black">
                <div class="widget-title">
                    <div class="widget-caption">
                        <i class="icon-envelope"></i>
                        {{ 'logs.title' | i18n }}
                    </div>
                </div>
                <div class="widget-body">
                    <ul class="nav nav-list log-list">
                        <li ng-repeat="noti in notifications">
                            <div class="span12">
                                <div class="span1">
                                    <span class="label label-success">
                                        <i class="icon-bell"></i>
                                    </span>
                                </div>
                                <div class="span8">
                                    <div>
                                        <a href="#/dashboard/general/{{ noti.server['@rid'] | nopound }}">{{
                                            noti.server.name }}</a>
                                    </div>
                                    <div>
                                        <span>{{ noti.description }}</span>
                                    </div>
                                </div>

                                <div class="span3">
                                    <span class="logDate pull-right">{{ noti.date  | fromNow }}</span>
                                </div>

                            </div>
                        </li>
                    </ul>
                </div>
                <div class="text-right">
                    <a href="#/dashboard/logjava">View All Notifications <i class="icon-share"></i></a>
                </div>
            </div>

        </div>

    </div>
    <div class="row-fluid">
        <div class="span6" ng-class="{ 'no-margin' : $index%2 == 0}" ng-repeat="metr in config.metrics">
            <div class="dashboard-metric" metricchart="config.metrics[$index]" chartheight="300" ></div>
        </div>
    </div>

</div>



